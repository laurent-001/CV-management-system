{% extends 'jobs/dashboard_base.html' %}
{% block title %}Employer Dashboard{% endblock %}
{% block page_title %}Employer Dashboard{% endblock %}

{% block content %}
<div class="summary-cards">
    <div class="card">
        <h3>Total Jobs Posted</h3>
        <p>{{ total_jobs }}</p>
    </div>
    <div class="card">
        <h3>Total Applications</h3>
        <p>{{ total_applications }}</p>
    </div>
    <div class="card">
        <h3>New Applications (7 days)</h3>
        <p>{{ new_applications }}</p>
    </div>
</div>

<div class="actions">
    <a href="{% url 'create_job' %}" class="btn btn-primary">Post a New Job</a>
</div>

<div class="job-listings">
    <h2>Your Job Postings</h2>
    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Status</th>
                <th>Date Posted</th>
                <th>Applicants</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for job in jobs %}
                <tr>
                    <td>{{ job.title }}</td>
                    <td>{{ job.status }}</td>
                    <td>{{ job.created_at|date:"Y-m-d" }}</td>
                    <td>{{ job.jobapplication_set.count }}</td>
                    <td>
                        <a href="{% url 'view_applicants' job.id %}">View Applicants</a>
                        <a href="{% url 'edit_job' job.id %}">Edit</a>
                        <a href="{% url 'delete_job' job.id %}">Delete</a>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="5">You have not posted any jobs yet.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
